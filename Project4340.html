<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MontraThai — Quick Appointment & Payroll</title>
<!-- added font -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="styles/Project4340.css">
</head>
<body>
  <div class="wrap" role="main">
    <header>
      <div class="logo">MT</div>
      <div>
        <h1>MontraThai — Quick Booking & Payroll</h1>
        <p class="lead">Fast one-page appointment form and simple payroll sheet. Designed to minimize clicks.</p>
      </div>
    </header>

    <!-- CSS-only tabs -->
    <input type="radio" id="tab-appointment" name="tab" checked>
    <input type="radio" id="tab-payroll" name="tab">
    <div class="tabs-labels">
      <div class="tabs">
        <label for="tab-appointment">Appointment</label>
        <label for="tab-payroll">Payroll</label>
      </div>
    </div>

    <div class="tab-content">
      <!-- Appointment content -->
      <section aria-labelledby="appt-title" class="card">
        <h2 id="appt-title" style="margin-top:0;font-size:16px">Quick Appointment</h2>

        <!-- optional thumbnails: drop provided images into images/ as spa1.jpg, spa2.jpg, spa3.jpg -->
        <div class="thumbs" aria-hidden="true">
          <img src="https://static.wixstatic.com/media/11062b_f78c3007472047b7991f8740148aebd0~mv2.jpeg/v1/fill/w_190,h_258,al_c,q_80,usm_0.66_1.00_0.01,enc_avif,quality_auto/Luxury%20Spa.jpeg" alt="">
          <img src="https://static.wixstatic.com/media/11062b_bead31d3b8dd46358d4d4df83a3d3720~mv2.jpeg/v1/fill/w_320,h_258,al_c,q_80,usm_0.66_1.00_0.01,enc_avif,quality_auto/Shoulder%20Massage.jpeg" alt="">
          <img src="https://static.wixstatic.com/media/11062b_bb85efd759a14500b26eb128a03fdc07~mv2_d_7360_4912_s_4_2.jpg/v1/fill/w_195,h_258,al_c,q_80,usm_0.66_1.00_0.01,enc_avif,quality_auto/Hot%20Stone%20Massage.jpg" alt="">
        </div>

        <form action="mailto:info@montrathaimassage.net" method="post" enctype="text/plain">
          <div class="grid">
            <div>
              <label class="field">Service</label>
              <select id="service-select" name="Service" required>
                <!-- expanded options (from screenshot) -->
                <option>Thai, Swedish, Combo, Deep Tissue, Prenatal - 1 hr</option>
                <option>Thai, Swedish, Combo, Deep Tissue, Prenatal - 75 Mins</option>
                <option>Thai, Swedish, Combo, Deep Tissue, Prenatal - 90 Mins</option>
                <option>Thai, Swedish, Combo, Deep Tissue, Prenatal - 2 hr</option>
                <option>Couples Massage - 1 hr</option>
                <option>Couples Massage - 75 min</option>
                <option>Couples Massage - 90 min</option>
                <option>Deep Tissue - 1 hr</option>
                <option>Swedish - 1 hr</option>
                <option>Foot Massage - 30 min</option>
                <option>Foot Massage - 45 min</option>
                <option>Prenatal - 60 min</option>
                <option>Hot Stone - 75 min</option>
                <!-- add or edit entries as needed -->
              </select>
            </div>
            <div>
              <label class="field">Therapist (optional)</label>
              <select id="therapist-select" name="Therapist">
                <option value="">Any</option>
                <!-- therapist options are populated automatically -->
              </select>
              <div id="therapist-availability" class="muted" aria-live="polite" style="margin-top:6px;font-size:13px"></div>
            </div>

            <div>
              <label class="field">Date</label>
              <input type="date" id="date-input" name="Date" required>
            </div>
            <div>
              <label class="field">Time</label>
              <input type="time" name="Time" required>
            </div>

            <div>
              <label class="field">Full name</label>
              <input type="text" name="Name" placeholder="Jane Doe" required>
            </div>
            <div>
              <label class="field">Phone</label>
              <input type="tel" name="Phone" placeholder="(555) 123-4567" required>
            </div>

            <div class="full">
              <label class="field">Email</label>
              <input type="email" name="Email" placeholder="you@example.com">
            </div>

            <div class="full">
              <label class="field">Notes / Requests</label>
              <textarea name="Notes" placeholder="Any preferences, allergies, or notes..."></textarea>
            </div>

            <div class="full actions">
              <button class="btn" type="submit">Send Booking (one click)</button>
              <button class="btn secondary" type="reset">Clear</button>
              <div class="muted" style="margin-left:auto">Or call: (enter phone on site)</div>
            </div>
          </div>
        </form>
      </section>

      <!-- Payroll content -->
      <section aria-labelledby="pay-title" style="margin-top:18px" class="card">
        <h2 id="pay-title" style="font-size:16px;margin-bottom:6px">Simple Payroll Sheet</h2>
        <p class="muted" style="margin:0 0 8px 0">Fill staff rows and submit. This uses email submit so payroll can be saved/emailed quickly.</p>

        <form action="mailto:payroll@montrathaimassage.net" method="post" enctype="text/plain" id="payroll-form">
          <!-- Tax rate control -->
          <div class="actions" style="margin-bottom:8px;align-items:center">
            <label class="field" style="margin:0 8px 0 0">Tax rate (%)</label>
            <input type="number" id="tax-rate" name="tax_rate_percent" value="10" min="0" step="0.01" style="width:90px;padding:8px;border-radius:8px;border:1px solid rgba(15,23,42,0.06)">
            <div class="muted" style="margin-left:auto;font-size:13px">Values update live — totals included in email</div>
          </div>

          <!-- extended payroll table: Tips + visible Gross + computed columns -->
          <table class="pay" aria-describedby="pay-desc">
            <thead>
              <tr>
                <th style="width:22%">Staff Name</th>
                <th style="width:10%">Rate (hr)</th>
                <th style="width:10%">Hours</th>
                <th style="width:10%">Tips</th>
                <th style="width:12%">Gross</th>
                <th style="width:12%">Tax</th>
                <th style="width:12%">Net</th>
                <th style="width:12%">Notes</th>
              </tr>
            </thead>
            <tbody id="payroll-body">
              <tr data-row="1">
                <td><input type="text" name="staff1_name" placeholder="Name"></td>
                <td><input type="number" name="staff1_rate" class="rate" step="0.01" placeholder="12.50"></td>
                <td><input type="number" name="staff1_hours" class="hours" step="0.01" placeholder="8"></td>
                <td><input type="number" name="staff1_tips" class="tips" step="0.01" placeholder="0.00"></td>
                <td class="result"><span class="gross" data-row="1">0.00</span></td>
                <td class="result"><span class="tax" data-row="1">0.00</span></td>
                <td class="result"><span class="net" data-row="1">0.00</span></td>
                <td><input type="text" name="staff1_notes" placeholder="OT, tips..."><button type="button" class="remove-btn" aria-label="Remove row">✕</button></td>

                <!-- hidden computed fields for email submit -->
                <input type="hidden" name="staff1_gross" class="hidden-gross" data-row="1" value="0.00">
                <input type="hidden" name="staff1_tax" class="hidden-tax" data-row="1" value="0.00">
                <input type="hidden" name="staff1_net" class="hidden-net" data-row="1" value="0.00">
              </tr>

              <tr data-row="2">
                <td><input type="text" name="staff2_name" placeholder="Name"></td>
                <td><input type="number" name="staff2_rate" class="rate" step="0.01" placeholder="12.50"></td>
                <td><input type="number" name="staff2_hours" class="hours" step="0.01" placeholder="8"></td>
                <td><input type="number" name="staff2_tips" class="tips" step="0.01" placeholder="0.00"></td>
                <td class="result"><span class="gross" data-row="2">0.00</span></td>
                <td class="result"><span class="tax" data-row="2">0.00</span></td>
                <td class="result"><span class="net" data-row="2">0.00</span></td>
                <td><input type="text" name="staff2_notes" placeholder="OT, tips..."><button type="button" class="remove-btn" aria-label="Remove row">✕</button></td>

                <input type="hidden" name="staff2_gross" class="hidden-gross" data-row="2" value="0.00">
                <input type="hidden" name="staff2_tax" class="hidden-tax" data-row="2" value="0.00">
                <input type="hidden" name="staff2_net" class="hidden-net" data-row="2" value="0.00">
              </tr>

              <tr data-row="3">
                <td><input type="text" name="staff3_name" placeholder="Name"></td>
                <td><input type="number" name="staff3_rate" class="rate" step="0.01" placeholder="12.50"></td>
                <td><input type="number" name="staff3_hours" class="hours" step="0.01" placeholder="8"></td>
                <td><input type="number" name="staff3_tips" class="tips" step="0.01" placeholder="0.00"></td>
                <td class="result"><span class="gross" data-row="3">0.00</span></td>
                <td class="result"><span class="tax" data-row="3">0.00</span></td>
                <td class="result"><span class="net" data-row="3">0.00</span></td>
                <td><input type="text" name="staff3_notes" placeholder="OT, tips..."><button type="button" class="remove-btn" aria-label="Remove row">✕</button></td>

                <input type="hidden" name="staff3_gross" class="hidden-gross" data-row="3" value="0.00">
                <input type="hidden" name="staff3_tax" class="hidden-tax" data-row="3" value="0.00">
                <input type="hidden" name="staff3_net" class="hidden-net" data-row="3" value="0.00">
              </tr>
            </tbody>
          </table>

          <!-- controls and totals -->
          <div class="summary" style="display:flex;gap:12px;align-items:center;margin-top:10px">
            <button type="button" id="add-staff" class="btn small">+ Add Staff</button>
            <div class="muted">Total Gross: <strong id="total-gross">0.00</strong></div>
            <div class="muted">Total Tax: <strong id="total-tax">0.00</strong></div>
            <div class="muted">Total Net: <strong id="total-net">0.00</strong></div>

            <input type="hidden" name="total_gross" id="hidden-total-gross" value="0.00">
            <input type="hidden" name="total_tax" id="hidden-total-tax" value="0.00">
            <input type="hidden" name="total_net" id="hidden-total-net" value="0.00">
          </div>

          <div class="actions" style="margin-top:10px">
            <button class="btn" type="submit">Send Payroll</button>
            <button class="btn secondary" type="reset" id="payroll-reset">Clear</button>
            <div class="muted" style="margin-left:auto">Tip: open in browser and print for records</div>
          </div>
        </form>
      </section>
    </div>
  </div>

  <!-- payroll calculator script (replaced) -->
  <script>
    (function(){
      const fmt = v => Number(v || 0).toFixed(2);

      const body = document.getElementById('payroll-body');
      let nextRow = 4; // next row index to create

      function recalc(){
        const taxPercent = Math.max(0, Number(document.getElementById('tax-rate').value || 0)) / 100;
        let totalGross = 0, totalTax = 0, totalNet = 0;

        document.querySelectorAll('tr[data-row]').forEach(row => {
          const r = row.getAttribute('data-row');
          const rate = Number(row.querySelector('.rate')?.value || 0);
          const hours = Number(row.querySelector('.hours')?.value || 0);
          const tips = Number(row.querySelector('.tips')?.value || 0);

          const gross = (rate * hours) + tips;
          const tax = gross * taxPercent;
          const net = gross - tax;

          totalGross += gross;
          totalTax += tax;
          totalNet += net;

          // update visible cells
          const spanGross = row.querySelector('.gross[data-row="'+r+'"]');
          const spanTax = row.querySelector('.tax[data-row="'+r+'"]');
          const spanNet = row.querySelector('.net[data-row="'+r+'"]');
          if(spanGross) spanGross.textContent = fmt(gross);
          if(spanTax) spanTax.textContent = fmt(tax);
          if(spanNet) spanNet.textContent = fmt(net);

          // update hidden inputs for email
          const hg = document.querySelector('.hidden-gross[data-row="'+r+'"]');
          const ht = document.querySelector('.hidden-tax[data-row="'+r+'"]');
          const hn = document.querySelector('.hidden-net[data-row="'+r+'"]');
          if(hg) hg.value = fmt(gross);
          if(ht) ht.value = fmt(tax);
          if(hn) hn.value = fmt(net);
        });

        document.getElementById('total-gross').textContent = fmt(totalGross);
        document.getElementById('total-tax').textContent = fmt(totalTax);
        document.getElementById('total-net').textContent = fmt(totalNet);

        document.getElementById('hidden-total-gross').value = fmt(totalGross);
        document.getElementById('hidden-total-tax').value = fmt(totalTax);
        document.getElementById('hidden-total-net').value = fmt(totalNet);
      }

      // create a new staff row
      function addRow(prefillIndex){
        const i = prefillIndex || nextRow++;
        const tr = document.createElement('tr');
        tr.setAttribute('data-row', i);
        tr.innerHTML = `
          <td><input type="text" name="staff${i}_name" placeholder="Name"></td>
          <td><input type="number" name="staff${i}_rate" class="rate" step="0.01" placeholder="12.50"></td>
          <td><input type="number" name="staff${i}_hours" class="hours" step="0.01" placeholder="8"></td>
          <td><input type="number" name="staff${i}_tips" class="tips" step="0.01" placeholder="0.00"></td>
          <td class="result"><span class="gross" data-row="${i}">0.00</span></td>
          <td class="result"><span class="tax" data-row="${i}">0.00</span></td>
          <td class="result"><span class="net" data-row="${i}">0.00</span></td>
          <td><input type="text" name="staff${i}_notes" placeholder="OT, tips..."><button type="button" class="remove-btn" aria-label="Remove row">✕</button></td>
          <input type="hidden" name="staff${i}_gross" class="hidden-gross" data-row="${i}" value="0.00">
          <input type="hidden" name="staff${i}_tax" class="hidden-tax" data-row="${i}" value="0.00">
          <input type="hidden" name="staff${i}_net" class="hidden-net" data-row="${i}" value="0.00">
        `;
        body.appendChild(tr);
        recalc();
      }

      // remove row when clicking remove button
      body.addEventListener('click', function(e){
        if(e.target && e.target.matches('.remove-btn')){
          const tr = e.target.closest('tr[data-row]');
          if(tr) {
            tr.remove();
            recalc();
          }
        }
      });

      // listen for changes in inputs to recalc (delegation)
      document.getElementById('payroll-form').addEventListener('input', function(e){
        if(e.target.matches('.rate, .hours, .tips, #tax-rate')) recalc();
      });

      // add-row button
      document.getElementById('add-staff').addEventListener('click', function(){
        addRow();
      });

      // initialize and bind reset
      window.addEventListener('DOMContentLoaded', recalc);
      document.getElementById('payroll-reset').addEventListener('click', function(){
        // keep the first 3 rows, remove extras
        setTimeout(() => {
          Array.from(body.querySelectorAll('tr[data-row]')).forEach(tr => {
            const idx = Number(tr.getAttribute('data-row'));
            if(idx > 3) tr.remove();
          });
          nextRow = 4;
          recalc();
        }, 10);
      });
    })();
  </script>

  <!-- therapist availability script -->
  <script>
    (function(){
      // mapping of service -> therapists (names requested)
      const serviceMap = {
        "Thai Massage": ["Vicky","Amy","Lani"],
        "Oil Massage": ["Amy","Sherry","Lynn"],
        "Foot Massage": ["Lani","Lynn","Vicky"],
        "Couples": ["Vicky","Amy","Lani","Sherry","Lynn"]
      };

      // example date rule: Lani unavailable on weekends
      const dateUnavailable = {
        "Lani": d => d && (d.getDay() === 0 || d.getDay() === 6) // Sun(0)/Sat(6)
      };

      const serviceEl = document.getElementById('service-select');
      const dateEl = document.getElementById('date-input');
      const therapistEl = document.getElementById('therapist-select');
      const statusEl = document.getElementById('therapist-availability');

      function formatList(arr){
        if(!arr || arr.length === 0) return 'none';
        if(arr.length === 1) return arr[0];
        return arr.slice(0,-1).join(', ') + ' and ' + arr.slice(-1);
      }

      function updateTherapists(){
        const service = serviceEl.value;
        const dateVal = dateEl.value;
        const date = dateVal ? new Date(dateVal + 'T00:00:00') : null;

        let list = serviceMap[service] ? [...serviceMap[service]] : [];

        // apply date-based removals
        if(date){
          list = list.filter(name => {
            const rule = dateUnavailable[name];
            return typeof rule === 'function' ? !rule(date) : true;
          });
        }

        // rebuild select options (keep the "Any" option)
        therapistEl.innerHTML = '';
        const anyOpt = document.createElement('option');
        anyOpt.value = '';
        anyOpt.textContent = 'Any';
        therapistEl.appendChild(anyOpt);

        if(list.length === 0){
          const none = document.createElement('option');
          none.textContent = 'No therapists available';
          none.value = '';
          none.disabled = true;
          therapistEl.appendChild(none);
          statusEl.textContent = 'No therapists available for that service/date. Please choose another date or contact us.';
        } else {
          list.forEach(name => {
            const opt = document.createElement('option');
            opt.value = name;
            opt.textContent = name;
            therapistEl.appendChild(opt);
          });
          statusEl.textContent = 'Available: ' + formatList(list) + '.';
        }
      }

      // events
      serviceEl.addEventListener('change', updateTherapists);
      dateEl.addEventListener('change', updateTherapists);

      // initial populate
      document.addEventListener('DOMContentLoaded', updateTherapists);
    })();
  </script>

</body>
</html>